!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("hammerjs"),require("gsap")):"function"==typeof define&&define.amd?define(["hammerjs","gsap"],e):"object"==typeof exports?exports.FullpageSwiper=e(require("hammerjs"),require("gsap")):t.FullpageSwiper=e(t.Hammer,t.gsap)}(this,function(t,e){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(1)),o=a(n(2));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerRef=document.querySelector(e),this.containerType=this.containerRef.getAttribute("data-stack-type"),this.containerRef&&this.containerType?r.default&&o.default?(this.dep={Hammer:r.default,gsap:o.default},this.containerAxis="top"===this.containerType||"y"===this.containerType?"vertical":"horizontal",this.options=Object.assign({debug:!1},n),this.parents=[],this.stacks=[],this.hammers=[],this.currentIdx=0,this.eventType={axis:"",direction:""},this.dragging=!1,this.draggingRef=null,this.viewport=t.getViewport(),this.setParents(),this.setStacks(),this.setCommonLayout(),this.setLayout(),this._addEvents(),this.options.debug&&this.debug()):console.error('"Hammer" and "gsap" peerDependencies are required'):console.error("fullpage-swiper initialization error, check selector",e)}return i(t,null,[{key:"getViewport",value:function(){return{clientWidth:window.innerWidth||document.documentElement.clientWidth,clientHeight:window.innerHeight||document.documentElement.clientHeight}}},{key:"getRandomColor",value:function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}}]),i(t,[{key:"removeListeners",value:function(){}},{key:"_blockEvent",value:function(t){return""===this.eventType.axis?(this._updateEventType(t),!1):!this.isDragging||this.eventType.axis!==t.axis||void this._updateEventType(t)}},{key:"_updateEventType",value:function(t){this.eventType.axis=t.axis,this.eventType.direction=t.direction}},{key:"_resetDrag",value:function(){this.dragging=!1,this.eventType={target:null,axis:"",direction:""},this.draggingRef=null}},{key:"_getDraggingInfo",value:function(t){if(t){var e=t.canMoveToSibling[this.eventType.direction];return e||(e=t.canMoveToParent[this.eventType.direction]),e}return{}}},{key:"_panstart",value:function(t){this.isDragging=!0,this.eventTarget=this.stacks.find(function(e){return e.node===t.currentTarget}),this.eventTarget?this.options.dragStart(this):this.isDragging=!1}},{key:"_panleft",value:function(t){this._blockEvent({axis:"horizontal",direction:"left"})||(this.draggingRef||(this.draggingInfo=this._getDraggingInfo(this.eventTarget),this.draggingRef=this.draggingInfo.draggable),this.draggingRef?this._dragging(this.draggingInfo,t):this._resetDrag())}},{key:"_panright",value:function(t){this._blockEvent({axis:"horizontal",direction:"right"})||(this.draggingRef||(this.draggingInfo=this._getDraggingInfo(this.eventTarget),this.draggingRef=this.draggingInfo.draggable),this.draggingRef?this._dragging(this.draggingInfo,t):this._resetDrag())}},{key:"_pandown",value:function(t){this._blockEvent({axis:"vertical",direction:"down"})||(this.draggingRef||(this.draggingInfo=this._getDraggingInfo(this.eventTarget),this.draggingRef=this.draggingInfo.draggable),this.draggingRef?this._dragging(this.draggingInfo,t):this._resetDrag())}},{key:"_panup",value:function(t){this._blockEvent({axis:"vertical",direction:"up"})||(this.draggingRef||(this.draggingInfo=this._getDraggingInfo(this.eventTarget),this.draggingRef=this.draggingInfo.draggable),this.draggingRef?this._dragging(this.draggingInfo,t):this._resetDrag())}},{key:"_endCallback",value:function(){var t=this.stackMoveFromTo,e=t.to;t.toParent&&(e>=0?t.toParent.lastSeenIndex=e:(t.toParent.lastSeenIndex=this.currentIdx,t.to=this.currentIdx)),this.currentIdx=t.to,this.options.dragEnd(this),this._resetDrag()}},{key:"_panend",value:function(){var t=this;if(this.draggingRef){var e=this.draggingRef,n=this.eventType,i=e.type,r=n.direction,o=this.viewport,a=o.clientHeight,s=o.clientWidth,d=this.dep.gsap.timeline();if("top"===i&&("up"===r&&(this.eventTarget.node!==e.node&&(this.stackMoveFromTo.to=this.currentIdx),d.to(e.node,{top:-a}).add(function(){e.positions.top=-a,t._endCallback()})),"down"===r&&(this.eventTarget.node===e.node&&(this.stackMoveFromTo.to=this.currentIdx),d.to(e.node,{top:0}).add(function(){e.positions.top=0,t._endCallback()}))),"left"===i&&("left"===this.eventType.direction&&d.to(e.node,{left:-s}).add(function(){e.positions.left=-s,t._endCallback()}),"right"===this.eventType.direction&&d.to(e.node,{left:0}).add(function(){e.positions.left=0,t._endCallback()})),"y"===i){var l=e.positions.y;if("up"===r){var g=l;if(this.snapshotPositions.y<l){g=l-a;var h=-a*(e.children.length-1);g<h&&(g=h)}else this.stackMoveFromTo.to=this.currentIdx;d.to(e.node,{y:g}).add(function(){e.positions.y=g,t._endCallback()})}if("down"===r){var f=l;this.snapshotPositions.y>l?(f=l+a)>=0&&(f=0):this.stackMoveFromTo.to=this.currentIdx,d.to(e.node,{y:f}).add(function(){e.positions.y=f,t._endCallback()})}}if("x"===i){var c=e.positions.x;if("left"===r){var p=c;if(this.snapshotPositions.x<c){p=c-s;var u=-s*(e.children.length-1);p<u&&(p=u)}else this.stackMoveFromTo.to=this.currentIdx;d.to(e.node,{x:p}).add(function(){e.positions.x=p,t._endCallback()})}if("right"===r){var y=c;this.snapshotPositions.x>c?(y=c+s)>=0&&(y=0):this.stackMoveFromTo.to=this.currentIdx,d.to(e.node,{x:y}).add(function(){e.positions.x=y,t._endCallback()})}}}else this._resetDrag()}},{key:"_dragging",value:function(t,e){var n=this,i=t.from,r=t.to,o=t.changeableTo,a=this.draggingRef,s=a.type,d=this.viewport,l=d.clientHeight,g=d.clientWidth;this.snapshotPositions={top:0,left:0,x:0,y:0};var h=this.snapshotPositions,f=void 0,c=void 0,p=this.stacks.find(function(t){return t.node===n.eventTarget.node});if("y"===s){if((f=e.deltaY+a.positions.y)>=0)return a.positions.y=0,a.node.style.transform="translate3d(0px, 0px, 0px)",this.draggingInfo=this._getDraggingInfo(p),void(this.draggingRef=this.draggingInfo.draggable);var u=-l*(a.children.length-1);if(f<=u){a.positions.y=u,a.node.style.transform="translate3d(0px, "+u+"px, 0px)";var y=this._getDraggingInfo(p);return void(this.draggingRef=y.draggable)}h.y=f,this.dep.gsap.set(a.node,{y:f})}if("x"===s){if((c=e.deltaX+a.positions.x)>=0)return a.positions.x=0,a.node.style.transform="translate3d(0px, 0px, 0px)",this.draggingInfo=this._getDraggingInfo(p),void(this.draggingRef=this.draggingInfo.draggable);var v=-g*(a.children.length-1);if(c<=v)return a.positions.x=v,a.node.style.transform="translate3d("+v+"px, 0px, 0px)",this.draggingInfo=this._getDraggingInfo(p),void(this.draggingRef=this.draggingInfo.draggable);h.x=c,this.dep.gsap.set(a.node,{x:c})}if("top"===s){if((f=e.deltaY+a.positions.top)>=0)return a.positions.top=0,a.node.style.top="0px",this.draggingInfo=this._getDraggingInfo(p),void(this.draggingRef=this.draggingInfo.draggable);if(f<=-l)return a.positions.top=-l,a.node.style.top=-l+"px",this.draggingInfo=this._getDraggingInfo(p),void(this.draggingRef=this.draggingInfo.draggable);h.top=f,this.dep.gsap.set(a.node,{top:f})}if("left"===s){if((c=a.positions.left+e.deltaX)>=0)return a.positions.left=0,a.node.style.left="0px",this.draggingInfo=this._getDraggingInfo(p),void(this.draggingRef=this.draggingInfo.draggable);if(c<=-g)return a.positions.left=-g,a.node.style.left=-g+"px",this.draggingInfo=this._getDraggingInfo(p),void(this.draggingRef=this.draggingInfo.draggable);h.left=c,this.dep.gsap.set(a.node,{left:c})}this.stackMoveFromTo=this._getStackMoveFromTo(i,r,o),this.options.dragMove(this)}},{key:"_getStackMoveFromTo",value:function(t,e,n){var i={from:t};if(void 0!==e){var r=this.stacks[e].innerParent;i.to=e,i.toParent=r}else if(void 0!==n){var o=this.stacks[n].innerParent;i.to=o.lastSeenIndex?o.lastSeenIndex:n,i.toParent=o}return i}},{key:"_addEvents",value:function(){var t=this,e=new this.dep.Hammer(this.containerRef);this.hammers.push(e),e.add(new this.dep.Hammer.Pan({direction:this.dep.Hammer.DIRECTION_ALL,threshold:this.options.threshold})),this.stacks.forEach(function(e){e.node.addEventListener("touchstart",t._panstart.bind(t),!1)}),e.on("panend",this._panend.bind(this)),e.on("panleft",this._panleft.bind(this)),e.on("panright",this._panright.bind(this)),e.on("pandown",this._pandown.bind(this)),e.on("panup",this._panup.bind(this))}},{key:"setCommonLayout",value:function(){document.documentElement.style.overflow="hidden",document.documentElement.style.height="100%",document.documentElement.style.width="100%",document.body.style.overflow="hidden",document.body.style.height="100%",document.body.style.width="100%"}},{key:"setLayout",value:function(){var e=this;this.viewport=t.getViewport(),this.parents.forEach(function(t){switch(t.type){case"x":return void e._layoutX(t);case"y":return void e._layoutY(t);case"top":case"left":return void e._layoutFixed(t)}})}},{key:"_layoutX",value:function(t){var e=this.viewport,n=e.clientHeight,i=e.clientWidth,r=t.node,o=t.children;r.x=r.y=0,r.style.display="flex",r.style.overflow="hidden",r.style.position="relative",r.style.width=i*o.length+"px",r.style.transform="translate3d(0px, 0px, 0px)",o.forEach(function(t){var e=t.node;e.style.width=i+"px",e.style.height=n+"px"})}},{key:"_layoutY",value:function(t){var e=this.viewport.clientHeight,n=t.node,i=t.children;n.x=n.y=0,n.style.overflow="hidden",n.style.position="relative",n.style.height=e*i.length+"px",n.style.transform="translate3d(0px, 0px, 0px)",i.forEach(function(t){t.node.style.height=e+"px"})}},{key:"_layoutFixed",value:function(t){var e=this.viewport,n=e.clientHeight,i=e.clientWidth,r=t.node,o=t.children;r.style.overflow="hidden",r.style.position="relative",r.style.height=n+"px",r.style.width=i+"px",o.forEach(function(t,e,r){var o=t.node;o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height=n+"px",o.style.width=i+"px",o.style.zIndex=10*(r.length-e)})}},{key:"setParents",value:function(){var t=this;this.parents=Array.from(document.querySelectorAll("[data-stack-type]")).map(function(e){var n=e.getAttribute("data-stack-type"),i="top"===n||"y"===n?"vertical":"horizontal",r=[];return r=e===t.containerRef?Array.from(e.children).filter(function(t){return"string"==typeof t.getAttribute("data-stack")}):Array.from(e.querySelectorAll("[data-stack]")).filter(function(t){return"string"==typeof t.getAttribute("data-stack")}),{type:n,axis:i,node:e,isRoot:e===t.containerRef,children:r,positions:{x:0,y:0,top:0,left:0}}})}},{key:"setStacks",value:function(){for(var t=this,e=document.createTreeWalker(this.containerRef,NodeFilter.SHOW_ELEMENT,function(t){return t&&"string"==typeof t.getAttribute("data-stack")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},!1),n=e.firstChild(),i=0,r=function(){for(var r=n.parentNode,o=void 0;null!==r&&!(o=r.getAttribute("data-stack-type"));)r=r.parentNode;var a="top"===o||"y"===o?"vertical":"horizontal",s=t.parents.findIndex(function(t){return t.node===r}),d=t.parents[s];if(d.node===t.containerRef)d.outerParent=null;else{var l=t.parents[0].children.find(function(t){return t.node.querySelector("[data-stack-type]")===r});l&&(d.outerParent=l)}var g=d.children.findIndex(function(t){return t===n}),h={type:o,axis:a,node:n,siblingIndex:g,innerParent:d,innerParentIndex:s,isRootLevel:d.isRoot,isRootLevelStack:d.isRoot,children:d.children,isFirstNode:0===g,isLastNode:g===d.children.length-1,requestEvents:{},positions:{x:0,y:0,top:0,left:0}};d.children[g]=h;var f=e.firstChild();if(f)n=f;else{var c=e.nextSibling();n=c||(e.parentNode()?e.nextSibling():null)}h.isRootLevelStack||(h.stackIndex=i++,h.canMoveToSibling=t._canMoveToSibling(h),t.stacks.push(h))};null!==n;)r();this.stacks.forEach(function(e,n,i){e.canMoveToParent=t._canMoveToParent(e),e.nextStackView=t._setPrevNextTarget(e,i)})}},{key:"_canMoveToParent",value:function(t){var e=this.parents[0].axis,n=this.parents[0].type,i=t.canMoveToSibling,r=t.innerParent,o=t.innerParentIndex,a=r.outerParent,s={up:!i.up&&"vertical"===e&&!a.isLastNode,down:!i.down&&"vertical"===e&&!a.isFirstNode,left:!i.left&&"horizontal"===e&&!a.isLastNode,right:!i.right&&"horizontal"===e&&!a.isFirstNode};if(s.up){s.up={from:t.stackIndex},"y"===n&&(s.up.draggable=a.innerParent),"top"===n&&(s.up.draggable=a);var d=this.parents[o+1];d.axis===e?s.up.to=d.children[0].stackIndex:s.up.changeableTo=d.children[0].stackIndex}if(s.left){s.left={from:t.stackIndex},"x"===n&&(s.left.draggable=a.innerParent),"left"===n&&(s.left.draggable=a);var l=this.parents[o+1];l.axis===e?s.left.to=l.children[0].stackIndex:s.left.changeableTo=l.children[0].stackIndex}if(s.down){s.down={from:t.stackIndex},"y"===n&&(s.down.draggable=a.innerParent);var g=this.parents[o-1];if("top"===n){var h=g.outerParent;s.down.draggable=h}g.axis===e?s.down.to=g.children[g.children.length-1].stackIndex:s.down.changeableTo=g.children[g.children.length-1].stackIndex}if(s.right){s.right={from:t.stackIndex},"x"===n&&(s.right.draggable=a.innerParent);var f=this.parents[o-1];if("left"===n){var c=f.outerParent;s.right.draggable=c}f.axis===e?s.right.to=f.children[f.children.length-1].stackIndex:s.right.changeableTo=f.children[f.children.length-1].stackIndex}return s}},{key:"_canMoveToSibling",value:function(t){var e=t.innerParent.axis,n=t.innerParent.type,i={up:"vertical"===e&&!t.isLastNode,down:"vertical"===e&&!t.isFirstNode,left:"horizontal"===e&&!t.isLastNode,right:"horizontal"===e&&!t.isFirstNode};return i.up&&(i.up={from:t.stackIndex,to:t.stackIndex+1},"y"===n&&(i.up.draggable=t.innerParent),"top"===n&&(i.up.draggable=t)),i.left&&(i.left={from:t.stackIndex,to:t.stackIndex+1},"x"===n&&(i.left.draggable=t.innerParent),"left"===n&&(i.left.draggable=t)),i.down&&(i.down={from:t.stackIndex,to:t.stackIndex-1},"y"===n&&(i.down.draggable=t.innerParent),"top"===n&&(i.down.draggable=this.stacks[t.stackIndex-1])),i.right&&(i.right={from:t.stackIndex,to:t.stackIndex-1},"x"===n&&(i.right.draggable=t.innerParent),"left"===n&&(i.right.draggable=this.stacks[t.stackIndex-1])),i}},{key:"_setPrevNextTarget",value:function(t){t.stackIndex;var e=t.stackIndex,n=t.siblingIndex,i=t.type,r=t.axis,o=t.isRootLevel,a=t.isFirstNode,s=t.isLastNode,d=t.innerParent,l=t.children,g={up:!1,down:!1,left:!1,right:!1};if(t.results={up:null,down:null,left:null,right:null},o)"y"===i&&(s||(g.up=d),a||(g.down=d)),"x"===i&&(s||(g.left=d),a||(g.right=d)),"top"===i&&(s||(g.up=l[n]),a||(g.down=l[n-1])),"left"===i&&(s||(g.left=l[n]),a||(g.right=l[n-1]));else{var h=d.outerParent;"vertical"===r&&(h.isLastNode||("left"===h.type&&(g.left=h.children[h.siblingIndex]),"x"===h.type&&(g.left=h.innerParent)),h.isFirstNode||("left"===h.type&&(g.right=h.children[h.siblingIndex-1]),"x"===h.type&&(g.right=h.innerParent))),"y"===i&&(s?h.isLastNode||("top"===h.type&&(g.up=h.children[h.siblingIndex]),"y"===h.type&&(g.up=h.innerParent)):(g.up=d,t.results.up={type:i,from:e,to:e+1}),a?h.isFirstNode||("top"===h.type&&(g.down=h.children[h.siblingIndex-1]),"y"===h.type&&(g.down=h.innerParent)):(g.down=d,t.results.down={type:i,from:e,to:e-1})),"top"===i&&(s?h.isLastNode||("top"===h.type&&(g.up=h.children[h.siblingIndex]),"y"===h.type&&(g.up=h.innerParent)):(g.up=l[n],t.results.up={type:i,from:e,to:e+1}),a?h.isFirstNode||("top"===h.type&&(g.down=h.children[h.siblingIndex-1]),"y"===h.type&&(g.down=h.innerParent)):(g.down=l[n-1],t.results.down={type:i,from:e,to:e-1})),"horizontal"===r&&("top"===h.type&&(h.isLastNode||(g.up=h.children[h.siblingIndex]),h.isFirstNode||(g.down=h.children[h.siblingIndex-1])),"y"===h.type&&(g.up=h.innerParent,g.down=h.innerParent)),"x"===i&&(s?h.isLastNode||("left"===h.type&&(g.left=h.children[h.siblingIndex]),"x"===h.type&&(g.left=h.innerParent)):(g.left=d,t.results.left={type:i,from:e,to:e+1}),a?h.isFirstNode||("left"===h.type&&(g.right=h.children[h.siblingIndex-1]),"x"===h.type&&(g.right=h.innerParent)):(g.right=d,t.results.right={type:i,from:e,to:e-1})),"left"===i&&(s?h.isLastNode||("left"===h.type&&(g.left=h.children[h.siblingIndex]),"x"===h.type&&(g.left=h.innerParent)):(g.left=l[n],t.results.left={type:i,from:e,to:e+1}),a?h.isFirstNode||("left"===h.type&&(g.right=h.children[h.siblingIndex-1]),"x"===h.type&&(g.right=h.innerParent)):(g.right=l[n-1],t.results.right={type:i,from:e,to:e-1}))}return g}},{key:"debug",value:function(){this.stacks.forEach(function(e){var n=t.getRandomColor();e.node.style.backgroundColor=n}),console.log("STACK_PARENTS: ",this.parents),console.log("STACK_VIEW: ",this.stacks),window.fps=this}}]),t}();e.default=s,t.exports=e.default},function(e,n){e.exports=t},function(t,n){t.exports=e}])});